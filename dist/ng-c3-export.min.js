!function(){angular.module("ngC3Export.config",[]).value("ngC3Export.config",{debug:!0}),angular.module("ngC3Export",["ngC3Export.config"])}(angular),function(){"use strict";function e(e){return{restrict:"A",priority:1,controller:["$scope",function(e){e.config={exportedFileName:"c3 chart",removeDefs:!0}}],link:{post:function(n,t,r){var a=angular.element('<div class="exporter"><a class="savePNG"><i class="fa fa-download"></i></a></div>');r.exportedFileName&&(n.config.exportedFileName=r.exportedFileName),r.backgroundColor&&(n.config.backgroundColor=r.backgroundColor),r.removeDefs&&(n.config.removeDefs="true"===r.removeDefs),t.prepend(a),a.on("click",function(){e.createChartImages(t,n.config)})}}}}e.$inject=["ExportService"],angular.module("ngC3Export").directive("exportChart",e)}(),function(){"use strict";angular.module("ngC3Export").factory("ExportService",["StyleFactory",function(e){function n(n,t){var o=$(n),i=$(n.find("svg")).first()[0],l=angular.element(i.outerHTML)[0],g=angular.element('<canvas id="canvasOriginal"></canvas>')[0],s=angular.element('<svg id="emptysvg" xmlns="http://www.w3.org/2000/svg" version="1.1" height="2" />')[0],d=angular.element('<canvas id="canvasComputed"></canvas>')[0];t.removeDefs&&$(l).find("defs").remove(),g.width=o.width(),d.width=o.width(),g.height=o.height(),d.height=o.height();var c=angular.element('<div style="display: none;" class="c3"></div>');n.append(c),c.append(g),c.append(d),c.append(s),c.append(l),r(l,g);var u=e.exportStyles(g,d,l,s);r(l,u),a(o.find(".savePNG"),u,t.exportedFileName),g.remove(),d.remove(),s.remove(),l.remove()}function t(n,t){var a=$(n),i=$(n.find("svg")).first()[0],l=angular.element(i.outerHTML)[0],g=angular.element('<canvas id="canvasOriginal"></canvas>')[0],s=angular.element('<svg id="emptysvg" xmlns="http://www.w3.org/2000/svg" version="1.1" height="2" />')[0],d=angular.element('<canvas id="canvasComputed"></canvas>')[0];t.removeDefs&&$(l).find("defs").remove(),g.width=a.width(),d.width=a.width(),g.height=a.height(),d.height=a.height();var c=angular.element('<div style="display: none;" class="c3"></div>');n.append(c),c.append(g),c.append(d),c.append(s),c.append(l),r(l,g);var u=e.exportStyles(g,d,l,s);r(l,u);var v=o(u,t);return g.remove(),d.remove(),s.remove(),l.remove(),v}function r(e,n){canvg(n,(new XMLSerializer).serializeToString(e))}function a(e,n,t){e.attr("href",n.toDataURL("png")).attr("download",function(){return t+".png"})}function o(e,n){return Canvas2Image.convertToImage(e,e.width,e.height,n.type)}return{createChartImages:n,getChartImage:t}}])}(),function(){"use strict";angular.module("ngC3Export").factory("StyleFactory",function(){function e(n,t){if(t.push(n),n.hasChildNodes())for(var r=n.firstChild;r;)1===r.nodeType&&"SCRIPT"!=r.nodeName&&e(r,t),r=r.nextSibling;return t}function n(e,n){var t,r,a,o,i=getComputedStyle(e),l="";for(t=0,r=i.length;r>t;t++)a=i[t],o=i.getPropertyValue(a),o!==n.getPropertyValue(a)&&(l+="visibility"==a&&"hidden"==o?"display: none;":a+":"+o+";");e.setAttribute("style",l)}return{exportStyles:function(t,r,a,o){for(var i=[],l=getComputedStyle(o),g=e(a,i),s=g.length;s--;)n(g[s],l);return r}}})}();